<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 5.5.3">
    <meta name="viewport" content="width=device-width, initial-scale=1"><title>MarkBind CLI</title> <link rel="stylesheet" href="/mb-architecture/markbind/css/bootstrap.min.css"> <link rel="stylesheet" href="/mb-architecture/markbind/fontawesome/css/all.min.css"> <link rel="stylesheet" href="/mb-architecture/markbind/glyphicons/css/bootstrap-glyphicons.min.css"><link rel="stylesheet" href="/mb-architecture/markbind/css/codeblock-dark.min.css"><link rel="stylesheet" href="/mb-architecture/markbind/css/markbind.min.css"><link rel="stylesheet" href="/mb-architecture/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="/mb-architecture/plugins/markbind-plugin-tree/markbind-plugin-tree.css">
    
  <link rel="stylesheet" href="/mb-architecture/stylesheets/main.css">
</head>
<script>
  const baseUrl = '/mb-architecture'
</script>
<body  data-bs-spy="scroll" data-bs-target="#mb-page-nav" data-bs-offset="100" >
<div id="app" data-server-rendered="true"><header sticky=""><div data-v-7c0fd418><nav class="navbar navbar-expand-md d-print-none navbar-dark bg-dark" data-v-7c0fd418><div class="container-fluid" data-v-7c0fd418><div class="navbar-left" data-v-7c0fd418><a href="/mb-architecture/index.html" title="Home" class="navbar-brand" data-v-7c0fd418><img src="/mb-architecture/assets/logo.png" height="70" data-v-7c0fd418></a></div> <div class="navbar-default" data-v-7c0fd418><ul class="navbar-nav me-auto mt-2 mt-lg-0" data-v-7c0fd418> <li data-v-7c0fd418><a href="/mb-architecture/contents/architecture.html" class="nav-link" data-v-7c0fd418>Architecture</a></li> <li class="nav-link dropdown" data-v-99624572><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle nav-link" data-v-99624572>Components <span data-v-99624572></span></a> <ul class="dropdown-menu" data-v-99624572> <li data-v-99624572><a href="/mb-architecture/contents/mb_cli.html" class="dropdown-item" data-v-99624572>CLI</a></li> <li data-v-99624572><a href="/mb-architecture/contents/site_class.html" class="dropdown-item" data-v-99624572>Site</a></li></ul></li></ul></div> <ul class="navbar-nav navbar-right" data-v-7c0fd418><li data-v-7c0fd418><form class="navbar-form" data-v-7c0fd418><div class="dropdown" style="position:relative;" data-v-4f6e9aec><input data-bs-toggle="dropdown" type="text" placeholder="Search" autocomplete="off" value="" class="form-control" data-v-4f6e9aec> <div class="form-control placeholder-div-hidden" data-v-4f6e9aec>
      Search
    </div> <ul class="dropdown-menu search-dropdown-menu dropdown-menu-hidden dropdown-menu-end" data-v-4f6e9aec></ul></div></form></li></ul></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-7c0fd418><!----> <!----></div></div></header> <div id="flex-body"><nav id="site-nav" data-v-e6005420><div class="site-nav-top" data-v-e6005420><div class="fw-bold mb-2" style="font-size:1.25rem;" data-v-e6005420>Contents</div></div> <div class="nav-component slim-scroll" data-v-e6005420><div class="site-nav-root"><ul class="site-nav-list site-nav-list-root" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/mb-architecture/index.html" data-v-e6005420>How does MarkBind Work üè†</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/mb-architecture/contents/architecture.html" data-v-e6005420>MarkBind Architecture</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/mb-architecture/contents/mb_cli.html" data-v-e6005420>Command Line Interface</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/mb-architecture/contents/site_class.html" data-v-e6005420>Site Class</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420>Topic 3 

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/mb-architecture/contents/topic3a.html" data-v-e6005420>Topic 3a</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/mb-architecture/contents/topic3b.html" data-v-e6005420>Topic 3b</a></div></li></ul></li> <!----></ul></div></div> <!----></nav> <div id="content-wrapper"><div data-v-ef898034><nav aria-label="breadcrumb" class="breadcrumb-divider" data-v-ef898034><ol class="breadcrumb" data-v-ef898034><li class="notlink breadcrumb-marker" data-v-ef898034>
        ‚Ä∫‚Ä∫¬†¬†
      </li> </ol></nav></div> <h1 id="markbind-command-line-interface">MarkBind Command Line Interface<a href="#markbind-command-line-interface" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <br> <p>MarkBind makes use of the <code class="hljs inline no-lang">commander.js</code> npm package to build its CLI application, which simplifies the defining, parsing, of commands and adding options.</p> <div class="alert box-container alert-success" data-v-474166ec><!----> <div class="header-and-body" data-v-474166ec><!----> <div class="box-body-wrapper" data-v-474166ec><div class="icon-wrapper" data-v-474166ec><i class="fas fa-lightbulb" data-v-474166ec></i></div> <!----> <div class="contents" data-v-474166ec><p data-v-474166ec>Here is a component diagram of MarkBind CLI</p></div> <!----></div></div></div> <span class="image-wrapper"><img src="/diagrams/cli/markbind_cli.png" width="900" height="" loading="eager" class="img-fluid rounded"> <span class="image-caption"></span></span> <p><br> <br></p> <p>The command line supports a total of 4 commands. <code class="hljs inline no-lang">init</code>, <code class="hljs inline no-lang">serve</code>, <code class="hljs inline no-lang">build</code> and <code class="hljs inline no-lang">deploy</code>.</p> <p>Each command is refactored into the <code class="hljs inline no-lang">cli/src/cmd</code> folder.</p> <h1 id="1-markbind-init">1. markbind Init<a href="#1-markbind-init" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <p>Here is an activity diagram depicting the <code class="hljs inline no-lang">init</code> function.</p> <div class="card-container" data-v-c545cba4><div class="card expandable-card" data-v-c545cba4><div class="card-header header-toggle bg-light" data-v-c545cba4><div class="caret-wrapper" data-v-c545cba4><!----></div> <div class="header-wrapper card-title bg-light" data-v-c545cba4><p data-v-c545cba4>Activity Diagram - markbind init</p></div> <div class="button-wrapper" data-v-c545cba4><button type="button" class="collapse-button btn btn-outline-secondary" data-v-c545cba4><span aria-hidden="true" class="collapse-icon glyphicon glyphicon-menu-down"></span></button> <button type="button" class="close-button btn btn-outline-secondary" data-v-c545cba4><span aria-hidden="true" class="glyphicon glyphicon-remove" data-v-c545cba4></span></button> <button type="button" class="popup-button btn btn-outline-secondary" style="display:none;" data-v-c545cba4><span aria-hidden="true" class="glyphicon glyphicon-new-window" data-v-c545cba4></span></button></div></div> <div class="card-collapse" data-v-c545cba4><!----> <hr style="display:none;" data-v-c545cba4></div> <!----></div></div> <br> <p>When we run <code class="hljs inline no-lang">markbind init</code>, we call the async function <code class="hljs inline no-lang">init(root, options)</code>. This function creates a new <code class="hljs inline no-lang">Template</code> object, which either initalizes a new markbind project, or converts existing documentation into a markbind project.</p> <div class="alert box-container alert-info" data-v-474166ec><!----> <div class="header-and-body" data-v-474166ec><!----> <div class="box-body-wrapper" data-v-474166ec><div class="icon-wrapper" data-v-474166ec><i class="fas fa-info" data-v-474166ec></i></div> <!----> <div class="contents" data-v-474166ec><h2 id="template-class" data-v-474166ec>Template Class<a href="#template-class" onclick="event.stopPropagation()" class="fa fa-anchor" data-v-474166ec></a></h2> <p data-v-474166ec>The <code class="hljs inline no-lang" data-v-474166ec>Template</code> class is under <code class="hljs inline no-lang" data-v-474166ec>core/src/Site</code>, and handles the generation of a site from a template.</p> <div class="card-container" data-v-c545cba4><div class="card expandable-card" data-v-c545cba4><div class="card-header header-toggle bg-light" data-v-c545cba4><div class="caret-wrapper" data-v-c545cba4><!----></div> <div class="header-wrapper card-title bg-light" data-v-c545cba4><p data-v-c545cba4>Class Diagram - Template</p></div> <div class="button-wrapper" data-v-c545cba4><button type="button" class="collapse-button btn btn-outline-secondary" data-v-c545cba4><span aria-hidden="true" class="collapse-icon glyphicon glyphicon-menu-down"></span></button> <button type="button" class="close-button btn btn-outline-secondary" data-v-c545cba4><span aria-hidden="true" class="glyphicon glyphicon-remove" data-v-c545cba4></span></button> <button type="button" class="popup-button btn btn-outline-secondary" style="display:none;" data-v-c545cba4><span aria-hidden="true" class="glyphicon glyphicon-new-window" data-v-c545cba4></span></button></div></div> <div class="card-collapse" data-v-c545cba4><!----> <hr style="display:none;" data-v-c545cba4></div> <!----></div></div> <br data-v-474166ec> <h3 id="template-initialization" data-v-474166ec>Template Initialization<a href="#template-initialization" onclick="event.stopPropagation()" class="fa fa-anchor" data-v-474166ec></a></h3> <p data-v-474166ec>When <code class="hljs inline no-lang" data-v-474166ec>init</code> function calls the <code class="hljs inline no-lang" data-v-474166ec>template.init()</code> function it first validates the template option, then it simply copies the files into the existing directory.</p> <p data-v-474166ec>The markbind templates are located in <code class="hljs inline no-lang" data-v-474166ec>core/src/template</code>. Upon initalization, it checks that the template option chosen does exist in the given directory.</p> <h3 id="template-conversion" data-v-474166ec>Template Conversion<a href="#template-conversion" onclick="event.stopPropagation()" class="fa fa-anchor" data-v-474166ec></a></h3> <p data-v-474166ec>If the <code class="hljs inline no-lang" data-v-474166ec>--convert</code> flag is given in the cli, the program will attempt to convert existing files into a markbind project.</p> <p data-v-474166ec>I believe that the primary use case for this is to convert a GitHub Wiki into a MarkBind project. For example, consider cloning <a href="https://github.com/fortawesome/font-awesome/wiki" data-v-474166ec>Font-Awesome's GitHub Wiki</a> and running <code class="hljs inline no-lang" data-v-474166ec>markbind init --convert</code>.</p> <p data-v-474166ec>Essentially, it collects all pages, adds an index and about page, adds a default layout file that references all the existing markdown pages and builds the inital markbind template.</p></div> <!----></div></div></div> <h1 id="2-markbind-serve">2. markbind serve<a href="#2-markbind-serve" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <p>The markbind serve command is used to preview a MarkBind site locally while actively developing it. It performs three main tasks: building the site, starting a local web server, and enabling live preview with automatic updates. By default, it generates the website in a _site directory and serves it at <a href="http://127.0.0.1:8080">http://127.0.0.1:8080</a>, allowing the user to view changes in real-time.</p> <p>Here is a sequence diagram of the general mechanism of <code class="hljs inline no-lang">markbind serve</code>.</p> <span class="image-wrapper"><img src="/diagrams/cli/serve.png" width="900" height="" loading="eager" class="img-fluid rounded"> <span class="image-caption"></span></span> <p>Some notable entities:</p> <ul><li><code class="hljs inline no-lang">chokidar</code> is a minimal and efficent cross-platform file watching library.</li> <li><code class="hljs inline no-lang">live-server</code> is a minimal development server with live reload capability.</li></ul> <p>In the <code class="hljs inline no-lang">serve</code> function, it starts by parsing the command line options, finds the root folder and verifies required files.
It then initializes a  <code class="hljs inline no-lang">Site</code> object, reads the site configuration and generates the website.</p> <h3 id="site-generation-and-local-server">Site Generation and Local Server<a href="#site-generation-and-local-server" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>When executed, markbind serve first finds the root directory (either specified by the user or the current working directory). It then reads the site's configuration from site.json (or another file if specified using -s) and generates the initial static site. The generated files are placed in the _site folder, which acts as the server's root directory. The command then starts a lightweight web server using live-server, making the website accessible locally. If the --no-open (-n) option is not set, it automatically opens the website in the browser.</p> <h3 id="live-preview-and-file-watching">Live Preview and File Watching<a href="#live-preview-and-file-watching" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>A key feature of markbind serve is its ability to detect file changes and update the site dynamically. It uses chokidar, a file-watching library, to track changes in source files and trigger updates accordingly. If a file is modified, deleted, or added, the server rebuilds only the affected pages, reducing build time. Additionally, the --force-reload (-f) option forces all files to be reprocessed, which is useful when making deep structural changes.</p> <h3 id="optimized-single-page-mode-one-page">Optimized Single-Page Mode (--one-page)<a href="#optimized-single-page-mode-one-page" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>For users working on specific pages, the --one-page (-o) option speeds up development by serving only a single page initially (defaulting to index.md if no file is specified). This minimizes unnecessary rebuilds, making the workflow faster. If the --background-build (-b) option is enabled, MarkBind will automatically generate the remaining pages in the background, ensuring that the site remains up-to-date without affecting the user‚Äôs ability to edit content.</p> <h1 id="3-markbind-build">3. markbind build<a href="#3-markbind-build" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <p>The build.js script is responsible for generating a static website using MarkBind.</p> <p>It first determines the root directory by checking the user-specified input or defaulting to the current directory. If the <code class="hljs inline no-lang">--baseUrl</code> option is provided, it either sets it to an empty string or the specified value. The script then identifies the output directory, defaulting to <code class="hljs inline no-lang">_site</code> if none is provided. Using MarkBind‚Äôs Site class, it processes the files, applies configurations, and generates the static site. If the build is successful, it logs a success message; otherwise, it logs any errors and exits with a failure code.</p> <div class="card-container" data-v-c545cba4><div class="card expandable-card" data-v-c545cba4><div class="card-header header-toggle bg-light" data-v-c545cba4><div class="caret-wrapper" data-v-c545cba4><!----></div> <div class="header-wrapper card-title bg-light" data-v-c545cba4><p data-v-c545cba4>Activity Diagram - markbind build</p></div> <div class="button-wrapper" data-v-c545cba4><button type="button" class="collapse-button btn btn-outline-secondary" data-v-c545cba4><span aria-hidden="true" class="collapse-icon glyphicon glyphicon-menu-down"></span></button> <button type="button" class="close-button btn btn-outline-secondary" data-v-c545cba4><span aria-hidden="true" class="glyphicon glyphicon-remove" data-v-c545cba4></span></button> <button type="button" class="popup-button btn btn-outline-secondary" style="display:none;" data-v-c545cba4><span aria-hidden="true" class="glyphicon glyphicon-new-window" data-v-c545cba4></span></button></div></div> <div class="card-collapse" data-v-c545cba4><!----> <hr style="display:none;" data-v-c545cba4></div> <!----></div></div> <br> <h1 id="4-markbind-deploy">4. markbind deploy<a href="#4-markbind-deploy" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <p>This command deploys the site to the repo's GitHub pages by generating the site and pyshing the generated site to <code class="hljs inline no-lang">gh-pages</code> branch of the current git working directory's repo.</p> <div class="card-container" data-v-c545cba4><div class="card expandable-card" data-v-c545cba4><div class="card-header header-toggle bg-light" data-v-c545cba4><div class="caret-wrapper" data-v-c545cba4><!----></div> <div class="header-wrapper card-title bg-light" data-v-c545cba4><p data-v-c545cba4>Activity Diagram - markbind deploy</p></div> <div class="button-wrapper" data-v-c545cba4><button type="button" class="collapse-button btn btn-outline-secondary" data-v-c545cba4><span aria-hidden="true" class="collapse-icon glyphicon glyphicon-menu-down"></span></button> <button type="button" class="close-button btn btn-outline-secondary" data-v-c545cba4><span aria-hidden="true" class="glyphicon glyphicon-remove" data-v-c545cba4></span></button> <button type="button" class="popup-button btn btn-outline-secondary" style="display:none;" data-v-c545cba4><span aria-hidden="true" class="glyphicon glyphicon-new-window" data-v-c545cba4></span></button></div></div> <div class="card-collapse" data-v-c545cba4><!----> <hr style="display:none;" data-v-c545cba4></div> <!----></div></div> <br> <p>The <code class="hljs inline no-lang">deploy</code> command in MarkBind starts by initializing the root directory, which defaults to the current working directory. It uses the <code class="hljs inline no-lang">cliUtil.findRootFolder()</code> function to find the root folder based on the user-specified directory and site configuration. If an error occurs during this process, it logs the error and exits.</p> <p>It then defines the output folder, which is typically the <code class="hljs inline no-lang">_site</code> directory within the root folder.</p> <p>The next step checks whether the <code class="hljs inline no-lang">--no-build</code> flag is passed. If the flag is not provided, it triggers the site generation using <code class="hljs inline no-lang">site.generate()</code>. This step builds the static site by processing source files into HTML and other assets.</p> <p>Once the site is built (or if <code class="hljs inline no-lang">--no-build</code> is specified), it deploys the site using <code class="hljs inline no-lang">site.deploy(options.ci)</code>. If the deployment is successful, it logs the deployment URL or simply indicates that the deployment has been completed.</p> <p>If an error occurs during either the build or deployment process, the error is logged, and the process exits with an error code.</p> <h1 id="site-instance-for-cli">Site Instance for CLI<a href="#site-instance-for-cli" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <p>Most of the functionalities are abstracted into the <code class="hljs inline no-lang">Site</code> instance, so a clear understanding of the <code class="hljs inline no-lang">Site</code> instance is needed.</p> <p>To summarize,</p> <ul><li><code class="hljs inline no-lang">serve</code> makes use of <code class="hljs inline no-lang">Site.generate()</code></li> <li><code class="hljs inline no-lang">build</code> makes use of <code class="hljs inline no-lang">Site.generate()</code></li> <li><code class="hljs inline no-lang">deploy</code> makes use of <code class="hljs inline no-lang">Site.generate()</code> and <code class="hljs inline no-lang">Site.deploy()</code></li></ul> <p>The CLI is simply an abstraction layer that allows users to interact with the MarkBind functionality through commands like <code class="hljs inline no-lang">markbind serve</code>, <code class="hljs inline no-lang">markbind build</code>, and <code class="hljs inline no-lang">markbind deploy</code>. These commands ultimately rely on the <code class="hljs inline no-lang">Site</code> instance, which is part of the core MarkBind functionality. The <code class="hljs inline no-lang">Site</code> instance abstracts the process of building, serving, and deploying a static site.</p> <div class="clearfix"><span class="float-start"><a href="/mb-architecture/contents/architecture.html" class="btn btn-light"><span><span aria-hidden="true" class="far fa-arrow-alt-circle-left"></span> Architecture</span></a></span> <span class="float-end"><a href="/mb-architecture/contents/site_class.html" class="btn btn-light"><span> Site Class <span aria-hidden="true" class="far fa-arrow-alt-circle-right"></span></span></a></span></div> <br></div> <nav id="page-nav" data-v-e6005420><div class="nav-component slim-scroll" data-v-e6005420><a class="navbar-brand page-nav-title" href="#" data-v-e6005420>MarkBind CLI</a> <nav id="mb-page-nav" class="nav nav-pills flex-column my-0 small no-flex-wrap" data-v-e6005420><a class="nav-link py-1" href="#markbind-command-line-interface" data-v-e6005420>MarkBind Command Line Interface‚Äé</a> <a class="nav-link py-1" href="#1-markbind-init" data-v-e6005420>1. markbind Init‚Äé</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap" data-v-e6005420><a class="nav-link py-1" href="#template-class" data-v-e6005420>Template Class‚Äé</a></nav> <a class="nav-link py-1" href="#2-markbind-serve" data-v-e6005420>2. markbind serve‚Äé</a> <a class="nav-link py-1" href="#3-markbind-build" data-v-e6005420>3. markbind build‚Äé</a> <a class="nav-link py-1" href="#4-markbind-deploy" data-v-e6005420>4. markbind deploy‚Äé</a> <a class="nav-link py-1" href="#site-instance-for-cli" data-v-e6005420>Site Instance for CLI‚Äé</a> <!----></nav></div> <!----></nav> <div aria-hidden="true" class="scroll-top-button fa-lg d-print-none" style="display:none;bottom:2%;right:2%;position:fixed;"><i class="fas fa-arrow-circle-up"></i></div></div> <footer><div class="text-center"><small>[Generated by <a href="https://markbind.org/">MarkBind 5.5.3</a>]</small></div></footer></div>
</body><script src="/mb-architecture/markbind/js/bootstrap-utility.min.js"></script>
<script src="/mb-architecture/markbind/js/polyfill.min.js"></script>
<script src="/mb-architecture/markbind/js/vue.min.js"></script>
<script src="/mb-architecture/markbind/js/markbind.min.js"></script>
<script src="mb_CLI.page-vue-render.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
</html>
